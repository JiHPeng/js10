(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-712701aa"],{"51e6":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"add-box"},[i("div",{staticClass:"edit"}),i("div",{staticClass:"inner"},[i("div",{staticClass:"type"},[t._v("\n             类型\n      "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.article.type,expression:"article.type"}],on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.article,"type",e.target.multiple?i:i[0])},t.hideIndustry]}},[i("option",{attrs:{value:""}},[t._v("--请选择--")]),t._l(t.types,function(e,a){return i("option",{domProps:{value:a}},[t._v(t._s(e))])})],2),t.showIndustry?i("select",{directives:[{name:"model",rawName:"v-model",value:t.article.industry,expression:"article.industry"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.article,"industry",e.target.multiple?i:i[0])}}},[i("option",{attrs:{value:""}},[t._v("--请选择--")]),t._l(t.industry,function(e,a){return i("option",{domProps:{value:a}},[t._v(t._s(e))])})],2):t._e()]),i("div",{staticClass:"title"},[t._v("\n      标题名称\n      "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.article.title,expression:"article.title"}],attrs:{type:"text"},domProps:{value:t.article.title},on:{input:function(e){e.target.composing||t.$set(t.article,"title",e.target.value)}}})]),i("div",{staticClass:"url"},[t._v("\n      跳转链接\n      "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.article.url,expression:"article.url"}],attrs:{type:"text"},domProps:{value:t.article.url},on:{input:function(e){e.target.composing||t.$set(t.article,"url",e.target.value)}}})]),i("div",{staticClass:"explain"},[i("span",[t._v("       说明 ")]),i("quill-editor",{ref:"myQuillEditor",staticClass:"quill-editor",model:{value:t.article.content,callback:function(e){t.$set(t.article,"content",e)},expression:"article.content"}})],1),i("div",{staticClass:"img-upload"},[t._v("\n             配图\n      "),i("label",{staticClass:"btn btn-primary",attrs:{for:"img-upload"}},[t._v("选择文件")]),i("input",{attrs:{id:"img-upload",type:"file",accept:"image/*"},on:{change:t.imgChoose}})]),i("div",[i("img",{class:{"zoom-in":!t.zoom,preview:t.zoom},attrs:{src:t.article.img},on:{click:t.zoomImg}})]),i("table",[t._m(0),i("tr",[i("td",[t._v(t._s(t.imgName))]),i("td",[t._v(t._s(t.imgSize))]),i("td",[i("div",{staticClass:"range-value"},[t._v(t._s(t.rangeValue))]),i("input",{ref:"range",staticClass:"range",attrs:{id:"range",type:"range",min:"0",max:"100",step:"1",disabled:""}})]),i("td"),i("td",[i("button",{attrs:{disabled:t.dis},on:{click:t.imgUpload}},[t._v("上传")]),i("button",{attrs:{disabled:t.dis2},on:{click:t.imgDelete}},[t._v("删除")])])])]),i("button",{attrs:{disabled:t.disOnOff},on:{click:function(e){return t.onOffLine(2)}}},[t._v("立即上线")]),i("button",{attrs:{disabled:t.disOnOff},on:{click:function(e){return t.onOffLine(1)}}},[t._v("存为草稿")]),i("button",{on:{click:t.cancel}},[t._v("取消")])])])},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",[i("th",[t._v("图片名")]),i("th",[t._v("文件大小")]),i("th",[t._v("进度")]),i("th",[t._v("操作")]),i("th",[t._v("操作")])])}],r=(i("7f7f"),{name:"add",data:function(){return{types:window._const.types,industry:window._const.industry,zoom:!0,dis:!0,dis2:!1,imgName:"",imgSize:"",imgSrc:"",rangeValue:"",article:{type:"",industry:""},showIndustry:!1,forbidden:!1}},methods:{cancel:function(){history.go(-1)},hideIndustry:function(){3==this.article.type?this.showIndustry=!this.showIndustry:(this.showIndustry=!1,this.article.industry="")},zoomImg:function(){this.zoom=!this.zoom},imgChoose:function(t){this.dis=!1;var e=t.target.files[0];this.imgName=e.name,this.imgSize=(e.size/1048576).toFixed(2)+"mb",this.imgSrc=new FormData,this.imgSrc.append("file",e)},imgUpload:function(){var t=this;this.dis=!0,this.dis2=!0,this.forbidden=!0,this.rangeValue=80,this.$refs.range.style.backgroundSize=this.rangeValue+"% 100%",this.$axios({method:"post",url:"api/a/u/img/task",data:this.imgSrc}).then(function(e){0===e.data.code&&(t.rangeValue=100,t.$refs.range.style.backgroundSize=t.rangeValue+"% 100%",t.article.img=e.data.data.url,console.log(e),t.dis2=!1,t.forbidden=!1)})},imgDelete:function(){var t=this;this.$confirm("警告：删除后将不再有图片显示，是否删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.rangeValue=0,t.$refs.range.style.backgroundSize=t.rangeValue+"% 100%",t.article.img="",t.imgSize="",t.imgName="",t.dis=!0}).catch(function(){})},onOffLine:function(t){var e=this;this.article.status=t,""==this.$route.query.id?this.$axios({method:"post",url:"api/a/u/article",params:this.article}).then(function(){return e.$message({type:"info",message:"操作已成功"})}):(console.log(this.article),this.$axios({method:"put",url:"api/a/u/article/"+this.$route.query.id,params:this.article}).then(function(){return e.$message({type:"info",message:"操作已成功"})}))}},beforeCreate:function(){var t=this;void 0==this.$route.query.id?this.$route.query.id="":this.$axios({method:"get",url:"api/a/article/"+this.$route.query.id}).then(function(e){console.log(e),t.article=e.data.data.article})},computed:{disOnOff:function(){return""===this.article.type||""==this.article.title||""==this.article.url||(3==this.article.type&&""==this.article.industry||1==this.forbidden)}}}),s=r,o=(i("df9b"),i("2877")),l=Object(o["a"])(s,a,n,!1,null,null,null);e["default"]=l.exports},"7f7f":function(t,e,i){var a=i("86cc").f,n=Function.prototype,r=/^\s*function ([^ (]*)/,s="name";s in n||i("9e1e")&&a(n,s,{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(t){return""}}})},df9b:function(t,e,i){"use strict";var a=i("eef4"),n=i.n(a);n.a},eef4:function(t,e,i){}}]);
//# sourceMappingURL=chunk-712701aa.4d24cea6.js.map